{"ast":null,"code":"import _slicedToArray from\"/home/ubuntu/PSW/INTERVIEW MATERIALS/Project-Assignment/Proleadsoft-Project-Assignment/resume-builder/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button,CircularProgress,Container,TextField}from\"@mui/material\";import React,{useState}from\"react\";import\"../../Styles/Preview.css\";import{connect}from\"react-redux\";import{templates}from\"../../Utility/Data/templates\";import JsPDF from\"jspdf\";import uniqid from\"uniqid\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Preview=function Preview(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),resumeName=_useState4[0],setResumeName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];// console.log(\"props\", props)\nvar getTemplate=function getTemplate(template,index){if(template.id===props.selectedTemplateId){var TemplateComp=/*#__PURE__*/React.cloneElement(template.template,{personalinfo:props.personalInfo,workexperience:props.experiences,educationinfo:props.educationInfo,skills:props.skills,index:index});return TemplateComp;}};// console.log(props.initialPersonalInfoState);\nvar handleSave=function handleSave(){if(resumeName.length===0){setError(\"*Please fill this field\");}else{setError(\"\");setLoading(true);var report=new JsPDF(\"portrait\",\"pt\",\"a4\");report.html(document.getElementById(\"\".concat(props.selectedTemplateId-1,\"report\"))).then(function(){report.save(\"\".concat(resumeName,\".pdf\"));setLoading(false);//Saving the user data in localstorage\nvar resumes=window.localStorage.getItem(\"resumes\");// console.log(resumes);\nif(resumes){var newResumes=JSON.parse(resumes);var resumeFound=newResumes.find(function(resume){return resume.id===props.selectedResumeId;});if(resumeFound){var allNewResumes=newResumes.map(function(resume){if(resume.id===props.selectedResumeId){return{template_id:props.selectedTemplateId,id:props.selectedResumeId,personalInfo:props.personalInfo,experiences:props.experiences,educationInfo:props.educationInfo,skills:props.skills};}else return resume;});window.localStorage.setItem(\"resumes\",JSON.stringify(allNewResumes));window.location.reload();return;}newResumes.push({template_id:props.selectedTemplateId,id:uniqid(),personalInfo:props.personalInfo,experiences:props.experiences,educationInfo:props.educationInfo,skills:props.skills});window.localStorage.setItem(\"resumes\",JSON.stringify(newResumes));}else{window.localStorage.setItem(\"resumes\",JSON.stringify([{template_id:props.selectedTemplateId,id:uniqid(),personalInfo:props.personalInfo,experiences:props.experiences,educationInfo:props.educationInfo,skills:props.skills}]));}//Redirect user to the myResumes page\nwindow.location.reload();}).catch(function(error){return console.log(error.message);});}};var handleBack=function handleBack(){props.setTab(props.tab-1);};return/*#__PURE__*/_jsxs(Container,{sx:{padding:{xs:\"40px 20px\",md:\"60px 80px\"}},className:\"preview-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"preview-header-title\",children:\"Resume Preview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"resume-preview-grid-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"resume-preview-grid-item\",id:\"previewresume\",children:templates.map(function(template,index){return getTemplate(template,index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"resume-preview-grid-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"resume-save-container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"resume-save-title\",children:\"Create File Name\"}),/*#__PURE__*/_jsx(TextField,{value:resumeName,onChange:function onChange(e){return setResumeName(e.target.value);},className:\"resume-name-field\",sx:{width:\"70%\"},id:\"outlined-basic\",variant:\"outlined\",error:error.length>0?true:false,helperText:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"resume-back-next-container\",children:[/*#__PURE__*/_jsx(Button,{onClick:handleBack,className:\"outlined-btn\",sx:{marginRight:\"20px\"},variant:\"outlined\",children:\"Back\"}),loading?/*#__PURE__*/_jsx(CircularProgress,{size:25}):/*#__PURE__*/_jsx(Button,{onClick:handleSave,className:\"contained-btn\",variant:\"contained\",children:\"Save\"})]})]})})]})]});};var mapStateToProps=function mapStateToProps(state){return{selectedTemplateId:state.CommonReducer.selectedTemplateId,selectedResumeId:state.CommonReducer.selectedResumeId,personalInfo:state.personalInfoReducer.personalInfo,experiences:state.workExperienceReducer.experiences,educationInfo:state.educationDetailsReducer.educationInfo,skills:state.keySkillsReducer.skills};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{};};export default connect(mapStateToProps,mapDispatchToProps)(Preview);","map":{"version":3,"names":["Button","CircularProgress","Container","TextField","React","useState","connect","templates","JsPDF","uniqid","Preview","props","loading","setLoading","resumeName","setResumeName","error","setError","getTemplate","template","index","id","selectedTemplateId","TemplateComp","cloneElement","personalinfo","personalInfo","workexperience","experiences","educationinfo","educationInfo","skills","handleSave","length","report","html","document","getElementById","then","save","resumes","window","localStorage","getItem","newResumes","JSON","parse","resumeFound","find","resume","selectedResumeId","allNewResumes","map","template_id","setItem","stringify","location","reload","push","catch","console","log","message","handleBack","setTab","tab","padding","xs","md","e","target","value","width","marginRight","mapStateToProps","state","CommonReducer","personalInfoReducer","workExperienceReducer","educationDetailsReducer","keySkillsReducer","mapDispatchToProps","dispatch"],"sources":["/home/ubuntu/PSW/INTERVIEW MATERIALS/Project-Assignment/Proleadsoft-Project-Assignment/resume-builder/src/Components/Preview/Preview.jsx"],"sourcesContent":["import { Button, CircularProgress, Container, TextField } from \"@mui/material\";\nimport React, { useState } from \"react\";\nimport \"../../Styles/Preview.css\";\nimport { connect } from \"react-redux\";\nimport { templates } from \"../../Utility/Data/templates\";\nimport JsPDF from \"jspdf\";\nimport uniqid from \"uniqid\";\n\nconst Preview = (props) => {\n  const [loading, setLoading] = useState(false);\n  const [resumeName, setResumeName] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  // console.log(\"props\", props)\n\n  const getTemplate = (template, index) => {\n    \n    if (template.id === props.selectedTemplateId) {\n      const TemplateComp = React.cloneElement(template.template, {\n        personalinfo: props.personalInfo,\n        workexperience: props.experiences,\n        educationinfo: props.educationInfo,\n        skills: props.skills,\n        index: index,\n      });\n      return TemplateComp;\n    }\n  };\n\n  // console.log(props.initialPersonalInfoState);\n\n  const handleSave = () => {\n    if (resumeName.length === 0) {\n      setError(\"*Please fill this field\");\n    } else {\n      setError(\"\");\n      setLoading(true);\n      const report = new JsPDF(\"portrait\", \"pt\", \"a4\");\n      report\n        .html(document.getElementById(`${props.selectedTemplateId - 1}report`))\n        .then(() => {\n          report.save(`${resumeName}.pdf`);\n          setLoading(false);\n          //Saving the user data in localstorage\n          let resumes = window.localStorage.getItem(\"resumes\");\n          // console.log(resumes);\n          if (resumes) {\n            let newResumes = JSON.parse(resumes);\n\n            let resumeFound = newResumes.find(\n              (resume) => resume.id === props.selectedResumeId\n            );\n\n            if (resumeFound) {\n              const allNewResumes = newResumes.map((resume) => {\n                if (resume.id === props.selectedResumeId) {\n                  return {\n                    template_id: props.selectedTemplateId,\n                    id: props.selectedResumeId,\n                    personalInfo: props.personalInfo,\n                    experiences: props.experiences,\n                    educationInfo: props.educationInfo,\n                    skills: props.skills,\n                  };\n                } else return resume;\n              });\n\n              window.localStorage.setItem(\n                \"resumes\",\n                JSON.stringify(allNewResumes)\n              );\n\n              window.location.reload();\n\n              return;\n            }\n\n            newResumes.push({\n              template_id: props.selectedTemplateId,\n              id: uniqid(),\n              personalInfo: props.personalInfo,\n              experiences: props.experiences,\n              educationInfo: props.educationInfo,\n              skills: props.skills,\n            });\n\n            window.localStorage.setItem(\"resumes\", JSON.stringify(newResumes));\n          } else {\n            window.localStorage.setItem(\n              \"resumes\",\n              JSON.stringify([\n                {\n                  template_id: props.selectedTemplateId,\n                  id: uniqid(),\n                  personalInfo: props.personalInfo,\n                  experiences: props.experiences,\n                  educationInfo: props.educationInfo,\n                  skills: props.skills,\n                },\n              ])\n            );\n          }\n\n          //Redirect user to the myResumes page\n          window.location.reload();\n        })\n        .catch((error) => console.log(error.message));\n    }\n  };\n\n  const handleBack = () => {\n    props.setTab(props.tab - 1);\n  };\n\n  return (\n    <Container\n      sx={{\n        padding: {\n          xs: \"40px 20px\",\n          md: \"60px 80px\",\n        },\n      }}\n      className=\"preview-container\">\n      <h2 className=\"preview-header-title\">Resume Preview</h2>\n      <div className=\"resume-preview-grid-container\">\n        <div className=\"resume-preview-grid-item\" id=\"previewresume\">\n          {templates.map((template, index) => {\n            return getTemplate(template, index);\n          })}\n        </div>\n        <div className=\"resume-preview-grid-item\">\n          <div className=\"resume-save-container\">\n            <h3 className=\"resume-save-title\">Create File Name</h3>\n            <TextField\n              value={resumeName}\n              onChange={(e) => setResumeName(e.target.value)}\n              className=\"resume-name-field\"\n              sx={{ width: \"70%\" }}\n              id=\"outlined-basic\"\n              variant=\"outlined\"\n              error={error.length > 0 ? true : false}\n              helperText={error}\n            />\n            <div className=\"resume-back-next-container\">\n              <Button\n                onClick={handleBack}\n                className=\"outlined-btn\"\n                sx={{ marginRight: \"20px\" }}\n                variant=\"outlined\">\n                Back\n              </Button>\n              {loading ? (\n                <CircularProgress size={25} />\n              ) : (\n                <Button\n                  onClick={handleSave}\n                  className=\"contained-btn\"\n                  variant=\"contained\">\n                  Save\n                </Button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </Container>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  selectedTemplateId: state.CommonReducer.selectedTemplateId,\n  selectedResumeId: state.CommonReducer.selectedResumeId,\n  personalInfo: state.personalInfoReducer.personalInfo,\n  experiences: state.workExperienceReducer.experiences,\n  educationInfo: state.educationDetailsReducer.educationInfo,\n  skills: state.keySkillsReducer.skills,\n});\n\nconst mapDispatchToProps = (dispatch) => ({});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Preview);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}